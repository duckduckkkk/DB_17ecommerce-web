{% extends "backstage.html" %}
{% block head %}
{{ super() }}
{% endblock head %}
<!-- website title -->
{% block title %} 訂單管理 {% endblock title %}

{% block content %}
<!-- website content -->
 <style>
  /* 滑鼠經過列微亮 */
  table.table-hover tbody tr:hover {
    background: rgba(25, 167, 100, 0.1);
    transition: all 0.2s ease-in-out;
  }

  /* 按鈕 hover 動畫 */
  .btn-outline-success:hover {
    background: linear-gradient(90deg, #0d8485, #36c762ff);
    color: white;
    border-color: #0d8485;
    transform: scale(1.05);
    transition: all 0.2s ease-in-out;
  }

  /* 表格圓角 + 陰影 */
  .table {
    border-radius: 10px;
    overflow: hidden;
    box-shadow: 0 4px 10px rgba(0,0,0,0.1);
  }
  .search-wrapper {
    position: relative;
    width: 100%;
    max-width: 400px;
}

.search-wrapper .search-icon {
    position: absolute;
    top: 50%;
    left: 12px;
    transform: translateY(-50%);
    color: #19a764;
    transition: all 0.3s ease;
}
.search-input {
    width: 100%;
    padding: 10px 40px; /* 左側空間給圖示 */
    border: 2px solid #0d8485;
    border-radius: 30px;
    transition: all 0.3s ease;
    box-shadow: 0 2px 5px rgba(0,0,0,0.1);
}

.search-input:focus {
    outline: none;
    border-color: #19a764;
    box-shadow: 0 0 8px rgba(25,167,100,0.5);
}

.search-input::placeholder {
    color: #a0a0a0;
    transition: all 0.3s ease;
}

.search-input:focus::placeholder {
    color: #19a764;
}


</style>
<script>
    $(document).ready(function(){
        $("#keyword").on("keyup", function() {
            var value = $(this).val().toLowerCase();
            $("#orderlist tr").filter(function() {
            $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1)
            });
        });
    });
</script>


{% for i in orderData %}
<div class="modal fade" id="staticBackdrop{{i.訂單編號}}" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="staticBackdropLabel">訂單細項列表</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="mb-3">
                    <table class="table table-bordered">
                        <tr>
                            <th><center>商品名稱</center></th>
                            <th><center>商品單價</center></th>
                            <th><center>訂購數量</center></th>
                        </tr>
                            
                        {% for j in orderDetail %}
                        {% if j.訂單編號 == i.訂單編號 %}
                        <tr>
                            <td> <center>{{ j.商品名稱 }}</center></td>
                            <td> <center>{{ j.商品單價 }}</center></td>
                            <td> <center>{{ j.訂購數量 }}</center></td>
                        </tr>
                        {% endif %}
                        {% endfor %}
                    </table>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-outline-success" data-bs-dismiss="modal" style="width:30%;">回訂單</button>
            </div>
        </div>
    </div>
</div>
{% endfor %}

<br/>
<div class="d-flex justify-content-start container-xxl my-3">
  <div class="search-wrapper">
    <span class="search-icon">
      <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="currentColor" class="bi bi-search" viewBox="0 0 16 16">
        <path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"/>
      </svg>
    </span>
    <input type="text" class="form-control search-input" id="keyword" placeholder="搜尋訂單" aria-label="Search">
  </div>
</div>

<br/>

<div class="container-xxl my-4">
  <table class="table table-hover table-striped align-middle shadow-sm" style="border-radius: 10px; overflow: hidden;">
    <thead>
      <tr style="background: linear-gradient(90deg, rgba(16, 42, 77, 1), rgba(25, 167, 100, 1)); color: white;">
        <th class="text-center">訂購編號</th>
        <th class="text-center">訂購人</th>
        <th class="text-center">訂單總價</th>
        <th class="text-center">訂單日期</th>
        <th class="text-center">綠色運送</th>
        <th class="text-center">訂單操作</th>
      </tr>
    </thead>
    <tbody id="orderlist">
      {% for i in orderData %}
      <tr>
        <td class="text-center">{{ i.訂單編號 }}</td>
        <td class="text-center">{{ i.訂購人 }}</td>
        <td class="text-center">{{ i.訂單總價 }}</td>
        <td class="text-center">{{ i.訂單時間 }}</td>
        <td class="text-center"
            {% if i.綠色運送 == 'Y' %}
                style="background-color: #d9ebe3ff; color:white;"
            {% endif %}
        >
            {{ i.綠色運送 }}
        </td>


        <td class="text-center">
          <button type="button" class="btn btn-outline-success btn-sm" data-bs-toggle="modal" data-bs-target="#staticBackdrop{{i.訂單編號}}">
            查看訂單細項
          </button>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>

{% endblock content %}
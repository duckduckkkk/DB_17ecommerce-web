{% extends "frontstage.html" %}
{% block head %}
{{ super() }}
<style>
  .cart-container {
    max-width: 900px;
    margin: 40px auto;
  }

  .cart-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    border: 1px solid #ddd;
    border-radius: 12px;
    padding: 15px 20px;
    margin-bottom: 15px;
    background-color: #fff;
    box-shadow: 0 2px 5px rgba(0,0,0,0.05);
  }

  .cart-info {
    flex: 2;
  }

  .cart-actions {
    flex: 1;
    display: flex;
    justify-content: flex-end;
    gap: 10px;
    align-items: center;
  }

  .cart-actions input[type="number"] {
    width: 70px;
    text-align: center;
  }

  .bottom-buttons {
    display: flex;
    justify-content: space-between;
    margin-top: 30px;
  }

  .bottom-buttons button {
    padding: 10px 25px;
    border: none;
    border-radius: 8px;
    color: white;
    font-weight: bold;
    transition: opacity 0.2s ease;
  }

  .btn-primary {
    background-color: #007bff;
  }

  .btn-success {
    background-color: #28a745;
  }

  .bottom-buttons button:hover {
    opacity: 0.85;
  }
</style>
{% endblock head %}

{% block title %}購物車清單{% endblock title %}

{% block content %}
<div class="container cart-container">
  <form method="post" action="{{ url_for('bookstore.cart') }}">

    {% for product in data %}
    <div class="cart-item">
      <div class="cart-info">
        <h5>{{ product.Name }}</h5>
        <p>商品編號：{{ product.Product_id }}</p>
        <p>單價：NT${{ product.Stock_price }}</p>
        <select name="condition_{{ product.Product_id }}">
          <option value="new" selected>全新</option>
          <option value="used">二手</option>
        </select>
      </div>

      <div class="cart-actions">
        <input class="form-control" type="number" min="1" value="{{ product.Amount }}" name="{{ product.Product_id }}">
        <button class="btn btn-danger" type="submit" value="{{product.Product_id}}" name="delete" onclick="return confirm('確定刪除 {{product.Name}} 嗎？')">刪除</button>
      </div>
    </div>
    {% endfor %}

    <div>
      <input type="checkbox" name="green_delivery" value="Y">
      綠色運送（低碳運送!勾選將為您折價30元運費)
      <span style="color: red;">訂購二手商品享單品6折優惠!</span>
    </div>


    <div class="bottom-buttons">
      <button class="btn btn-primary" type="submit" name="user_edit">繼續購物</button>
      <button class="btn btn-success" type="submit" name="buy">直接結帳</button>
    </div>

  </form>
</div>
{% endblock content %}
